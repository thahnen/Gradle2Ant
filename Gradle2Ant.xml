<?xml version="1.0" encoding="UTF-8" ?>
<project name="Gradle2Ant">
    <description>
        Call Gradle from Ant - Using Gradle Java plugin directly!
    </description>

    <!-- General properties! -->
    <dirname property="current.dir" file="${ant.file}" />


    <!-- General macro for running Gradle using Ant <exec> macro! -->
    <macrodef name="gradle" description="Gradle task executioner">
        <attribute name="task" />
        <attribute name="project"   default="" />
        <attribute name="args"      default="" />
        <attribute name="wrapper"   default="gradle" />
        <attribute name="dir"       default="${current.dir}" />

        <sequential>
            <exec executable="cmd" dir="@{dir}" failonerror="true">
                <arg line="/C @{wrapper} @{project}:@{task} @{args}" />
            </exec>
        </sequential>
    </macrodef>


    <!-- Gradle task "classes" to compile classes -->
    <macrodef name="gradle.classes" description="Gradle task 'classes'">
        <attribute name="project"   default="" />
        <attribute name="args"      default="" />
        <attribute name="wrapper"   default="gradle" />
        <attribute name="dir"       default="${current.dir}" />

        <sequential>
            <gradle task="classes"
                    project="@{project}"
                    args="@{args}"
                    wrapper="@{wrapper}"
                    dir="@{dir}" />
        </sequential>
    </macrodef>

    <!-- Gradle task "jar" to create JAR archive -->
    <macrodef name="gradle.jar" description="Gradle task 'jar'">
        <attribute name="project"   default="" />
        <attribute name="args"      default="" />
        <attribute name="wrapper"   default="gradle" />
        <attribute name="dir"       default="${current.dir}" />

        <sequential>
            <gradle task="jar"
                    project="@{project}"
                    args="@{args}"
                    wrapper="@{wrapper}"
                    dir="@{dir}" />
        </sequential>
    </macrodef>

    <!-- Gradle task "testClasses" to compile test classes -->
    <macrodef name="gradle.testClasses" description="Gradle task 'testClasses'">
        <attribute name="project"   default="" />
        <attribute name="args"      default="" />
        <attribute name="wrapper"   default="gradle" />
        <attribute name="dir"       default="${current.dir}" />

        <sequential>
            <gradle task="testClasses"
                    project="@{project}"
                    args="@{args}"
                    wrapper="@{wrapper}"
                    dir="@{dir}" />
        </sequential>
    </macrodef>

    <!-- Gradle task "test" to run test classes -->
    <macrodef name="gradle.test" description="Gradle task 'test'">
        <attribute name="project"   default="" />
        <attribute name="args"      default="" />
        <attribute name="wrapper"   default="gradle" />
        <attribute name="dir"       default="${current.dir}" />

        <sequential>
            <gradle task="test"
                    project="@{project}"
                    args="@{args}"
                    wrapper="@{wrapper}"
                    dir="@{dir}" />
        </sequential>
    </macrodef>


    <!-- Gradle task "clean" to clean workspace -->
    <macrodef name="gradle.clean" description="Gradle task 'clean'">
        <attribute name="project"   default="" />
        <attribute name="args"      default="" />
        <attribute name="wrapper"   default="gradle" />
        <attribute name="dir"       default="${current.dir}" />

        <sequential>
            <gradle task="clean"
                    project="@{project}"
                    args="@{args}"
                    wrapper="@{wrapper}"
                    dir="@{dir}" />
        </sequential>
    </macrodef>

    <!-- Gradle task "javadoc" to create Java documentation -->
    <macrodef name="gradle.javadoc" description="Gradle task 'javadoc'">
        <attribute name="project"   default="" />
        <attribute name="args"      default="" />
        <attribute name="wrapper"   default="gradle" />
        <attribute name="dir"       default="${current.dir}" />

        <sequential>
            <gradle task="javadoc"
                    project="@{project}"
                    args="@{args}"
                    wrapper="@{wrapper}"
                    dir="@{dir}" />
        </sequential>
    </macrodef>
</project>
